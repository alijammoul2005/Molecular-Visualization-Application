import tkinter as tk
from tkinter import ttk
import requests
import matplotlib.pyplot as plt
from chempy import Substance


MATERIALS_PROJECT_API_KEY = 'a1b2c3d4e5f6g7h8i9j0klmnopqrstuv'
DRUGBANK_API_KEY = 'DB1234567890abcdef1234567890abcdef'

def fetch_from_pubchem(molecule):
    url = f"https://pubchem.ncbi.nlm.nih.gov/rest/pug/compound/name/{molecule}/JSON"
    response = requests.get(url)
    return response.json()

def visualize_molecule(molecule):
    substance = Substance.from_formula(molecule)
    fig, ax = plt.subplots()
    substance.plot(ax)
    plt.show()

def search_molecule():
    molecule = search_entry.get()
    data = fetch_from_pubchem(molecule)
    result_label.config(text=str(data))
    visualize_molecule(molecule)

root = tk.Tk()
root.title("Molecular Visualization")

search_frame = ttk.Frame(root)
search_frame.pack(pady=10)
search_label = ttk.Label(search_frame, text="Molecule:")
search_label.pack(side=tk.LEFT, padx=5)
search_entry = ttk.Entry(search_frame, width=30)
search_entry.pack(side=tk.LEFT, padx=5)
search_button = ttk.Button(search_frame, text="Search", command=search_molecule)
search_button.pack(side=tk.LEFT, padx=5)

result_label = ttk.Label(root, text="Results will appear here.", wraplength=400)
result_label.pack(pady=10)

root.mainloop()
